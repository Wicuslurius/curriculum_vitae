<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Produccion comandos</title>
    <link rel="stylesheet" href="./../../../assets/styles/css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  </head>
  <body>
    <header>
      <div class="nav-logo-container">
        <img src="./../../../assets/img/logo_cv.png" alt="logo_cv" class="nav-logo"/>
        <p class="nav-title">Curriculum V</p>
      </div>
      <button class="open-menu" id="open"><i class="fa-solid fa-bars" style="color: white;"></i></button>
      <nav class="nav-bar" id="nav">    
        <button id="close" class="close-menu"><i class="fa-solid fa-x" style="color: white;"></i></button>
        <ul class="nav-list">
          <li><a href="./../../../index.html">Inicio</a></li>
          <li><a href="./../../documentation.html">Documentación</a></li>
          <li><a href="./../../certification.html">Certificaciones</a></li>
          <li><a href="./../../contact.html">Contacto</a></li>
        </ul>
      </nav>
    </header>
    <main class="principal-container">
      <section>
        <a href="./../../documentation.html" class="arrow-link"><i class="fa-solid fa-arrow-left arrow-left-icon" style="display: flex; justify-content: center; align-items: center;"></i></a>
        <h3 class="principal-title-prod">Produccion</h3>
        <div class="information-card-prod">
          <br>
          <pre>
          **
            bundle exec puma -C /home/ubuntu/bk-ror/shared/puma.rb                             #ambiente de production

            bundle exec puma -b 'unix:///home/ubuntu/bk-ror/shared/tmp/sockets/puma.sock'      #ambiente de development

              con esta instruccion ponemo a correr puma en primer plano

            para el ambiente de development necesitamos instalar las gemas de nuevo 
            **bundle install --without development test
            **RAILS_ENV=development bundle install
            **bundle install --with development

            podemos sustituir la palabra development con production dependiendo la necesidad

            **
            </pre>
            <br>
            <pre>
            **
            Ver logs de systemd:
              sudo journalctl -u puma.service -n 100

            Ver logs de Puma:
              cat /home/ubuntu/bk-ror/shared/log/puma.stderr.log
              cat /home/ubuntu/bk-ror/shared/log/puma.stdout.log
            **
            </pre>
            <br>
            <pre>
            **
            bundle show puma

              con esta instruccion vemos donde esta instalada la gema puma con bundle
            **
            </pre>
            <br>
            <pre>
            **
            sudo systemctl stop puma.service
              paramos el servicio de puma.service
            **
            </pre>
            <br>
            <pre>
            **
            sudo systemctl daemon-reload

              Recargar el daemon de systemd después de realizar cambios
            **
            </pre>
            <br>
            <pre>
            **
            sudo systemctl enable puma.service

              Habilitar Puma para que se inicie automáticamente al arrancar el sistema
            **
            </pre>
            <br>
            <pre>
            **
            sudo systemctl start puma.service

              iniciar el servidor de puma
            **
            </pre>
            <br>
            <pre>
            **
            sudo systemctl restart puma.service

              Reiniciar Puma (esto reiniciará el proceso y cerrará los sockets, lo que podría interrumpir las conexiones en curso)
            **
            </pre>
            <br>
            <pre>
            **
            sudo systemctl status puma
              Verificar el estado del servicio de Puma
            **
            </pre>
            <br>
            <pre>
            **
            sudo systemctl restart nginx

              cuando hacemos cambios en el archivo /etc/nginx/sites-available/default  corremos este comando para actualizar los cambios 
            **
            </pre>
            <br>
            <pre>
            **
            systemctl status nginx.service

              cuando queremos ver el estado de mi nginx  
            **
            </pre>
            <br>
            <pre>
            **
            tail -f /home/ubuntu/bk-ror/current/log/production.log -n 100
            **
            </pre>
            <br>
            <pre>
            **
            ps aux | grep rails

            Esto mostrará todos los procesos de Rails activos
            **
            </pre>
            <br>
            <pre>
            **
            bk-ror/release

            ls -t | tail -n +3 | xargs rm -rf

              comando para borrar los release antiguos
            **
            </pre>
            <br>
            <pre>
            **
            EDITOR="vim" bin/rails credentials:edit

              para abrir el archivo de credentials
            **
            </pre>
            <br>
            <pre>
            **
            RAILS_ENV=production rails assets:precompile --trace

              compilar assets en production
            **
            </pre>
        </div>
      </section>
    </main>
    <footer class="footer_container">
      <p style="margin: 30px 0;">© 2025 - Todos los derechos reservados</p>
    </footer>
    <script type="text/javascript" src="./../../../assets/javascript/main.js"></script>
  </body>
</html>